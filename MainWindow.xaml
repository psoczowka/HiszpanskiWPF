<Window x:Class="HiszpanskiWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:HiszpanskiWpf"
        mc:Ignorable="d"
        Title="Hiszpański WPF" Height="450" Width="900">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <!-- Lewy panel z TreeView -->
            <ColumnDefinition Width="500"/>
            <!-- Środkowy panel na ćwiczenia -->
            <ColumnDefinition Width="200"/>
            <!-- Prawy panel z opcjami nauki -->
        </Grid.ColumnDefinitions>

        <!-- TreeView: Rozdziały i Lekcje (LEWY PANEL) -->
        <TreeView Grid.Column="0"
          ItemsSource="{Binding Chapters}"
          SelectedItemChanged="TreeView_SelectedItemChanged">
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <!-- Powiązanie IsExpanded z właściwością Chapter -->
                    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                </Style>
            </TreeView.ItemContainerStyle>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Lessons}">
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                          Command="{Binding DataContext.ToggleSelectionCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                          CommandParameter="{Binding}" />
                        <TextBlock Text="{Binding Title}" FontSize="14"/>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>

        <!-- Środkowy panel: Wyświetlanie pytań i odpowiedzi -->
        <StackPanel Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center">

            <!-- Etykieta z instrukcją -->
            <TextBlock Text="{Binding InstructionLabel}"
                   FontSize="18" 
                   FontWeight="Bold"
                   Foreground="#555"
                   Margin="0,0,0,10"
                   TextAlignment="Center"/>


            <!-- Treść pyatnia -->
            <TextBlock Text="{Binding CurrentQuestion}" FontSize="20" FontWeight="Bold" Margin="0,0,0,10" TextAlignment="Center"/>

            <!-- Podpowiedź poniżej pytania -->
            <TextBlock Text="{Binding CurrentHint}" 
                   FontSize="20" 
                   FontStyle="Italic" 
                   Foreground="#888" 
                   Margin="0,0,0,20"
                   TextAlignment="Center"/>

            <TextBox x:Name="UserAnswerTextBox" 
                    Text="{Binding UserAnswer, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                    Width="300" Height="50" 
                    FontSize="16" Margin="0,0,0,10" 
                    VerticalContentAlignment="Center"
                    HorizontalContentAlignment="Center">
                <TextBox.InputBindings>
                    <KeyBinding Key="Enter" Command="{Binding CheckAnswerCommand}" />
                    <KeyBinding Key="Esc" Command="{Binding SkipQuestionCommand}" />
                </TextBox.InputBindings>
            </TextBox>

            <TextBlock Text="Punkty: "
           FontSize="16" FontWeight="Bold" Margin="0,0,0,10" TextAlignment="Center">
                        <Run Text="{Binding Score}" />
                        <Run Text=" / " />
                        <Run Text="{Binding TotalQuestions}" />
            </TextBlock>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20,0,0">
                <Button Content="Sprawdź (Enter)" 
            Command="{Binding CheckAnswerCommand}" 
            Width="150" Height="40" Margin="0,0,10,0" />

                <Button Content="Pomiń (Esc)" 
            Command="{Binding SkipQuestionCommand}" 
            Width="150" Height="40" 
            Style="{StaticResource RedButtonStyle}"/>
            </StackPanel>

            <TextBlock Text="{Binding FeedbackMessage}" 
                   FontSize="16" Foreground="Red" 
                   Margin="0,20,0,0"
                   TextAlignment="Center"/>
        </StackPanel>
        <!-- Wybór kierunku nauki (PRAWY PANEL) -->
        <StackPanel Grid.Column="2" Margin="10">
            <TextBlock Text="Kierunek nauki:" FontWeight="Bold" FontSize="14" Margin="20,10,0,10"/>

            <RadioButton Content="Hiszpański → Polski"
                 IsChecked="{Binding LearningDirection, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=SpanishToPolish}"
                 Command="{Binding ChangeDirectionCommand}"
                 CommandParameter="SpanishToPolish"/>

            <RadioButton Content="Polski → Hiszpański"
                 IsChecked="{Binding LearningDirection, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=PolishToSpanish}"
                 Command="{Binding ChangeDirectionCommand}"
                 CommandParameter="PolishToSpanish"/>

            <TextBlock Text="Poziom podpowiedzi:" FontWeight="Bold" FontSize="14" Margin="20,10,0,10"/>

            <RadioButton Content="Gwiazdki"
                 IsChecked="{Binding HintLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=StarsOnly}"
                 Command="{Binding ChangeHintLevelCommand}"
                 CommandParameter="StarsOnly"/>

            <RadioButton Content="Gwiazdki + Litery"
                 IsChecked="{Binding HintLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=StarsAndLetters}"
                 Command="{Binding ChangeHintLevelCommand}"
                 CommandParameter="StarsAndLetters"/>

            <RadioButton Content="Brak podpowiedzi"
                 IsChecked="{Binding HintLevel, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=NoHints}"
                 Command="{Binding ChangeHintLevelCommand}"
                 CommandParameter="NoHints"/>
        </StackPanel>
    </Grid>
</Window>
